import{L as S,r as p,C as w,c as y}from"./index-BW09mFaL.js";const s={theme:"dark",fontSize:14,showLineNumbers:!0,wordWrap:!1,autoAnalyze:!0,cacheEnabled:!0,maxRecentFiles:10,highlightSelectedRow:!0,copyFormat:"json"},n="poe-dat-studio-settings";function L(){try{const e=localStorage.getItem(n);if(e)return{...s,...JSON.parse(e)}}catch{console.warn("Failed to load settings from localStorage")}return{...s}}function z(e){try{localStorage.setItem(n,JSON.stringify(e))}catch{console.warn("Failed to save settings to localStorage")}}const E=S("settings",()=>{const e=p(L());w(e,t=>z(t),{deep:!0});function r(t){e.value.theme=t,o(t)}function o(t){const a=document.documentElement;if(a.classList.remove("dark","high-contrast"),t==="system"){const v=window.matchMedia("(prefers-color-scheme: dark)").matches;a.classList.toggle("dark",v)}else t==="high-contrast"?a.classList.add("dark","high-contrast"):t==="dark"&&a.classList.add("dark")}function i(t){e.value.fontSize=Math.max(10,Math.min(20,t))}function l(){e.value.showLineNumbers=!e.value.showLineNumbers}function c(){e.value.wordWrap=!e.value.wordWrap}function u(){e.value.autoAnalyze=!e.value.autoAnalyze}function d(){e.value.cacheEnabled=!e.value.cacheEnabled}function h(){e.value={...s}}function g(){e.value.highlightSelectedRow=!e.value.highlightSelectedRow}function f(t){e.value.copyFormat=t}const m=y(()=>({"--viewer-font-size":`${e.value.fontSize}px`,"--viewer-line-height":`${Math.round(e.value.fontSize*1.35)}px`}));return o(e.value.theme),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",()=>{e.value.theme==="system"&&o("system")}),{settings:e,cssVariables:m,setTheme:r,setFontSize:i,toggleLineNumbers:l,toggleWordWrap:c,toggleAutoAnalyze:u,toggleCache:d,toggleHighlightSelectedRow:g,setCopyFormat:f,resetSettings:h}});export{E as u};
