import{d as V,x as j,i as P,r as h,c as C,G as B,h as r,o,j as e,k as D,e as g,u as l,H as w,t as a,p as q,v as H,I as O,a as f,z as G,F as I,l as L,J as W,n as F,y as S}from"./index-BTVVN6Ob.js";import{G as M,u as K,D as U}from"./modal-DtpNB9j6.js";import{c as k}from"./createLucideIcon-CxJtGXaX.js";import{D as J}from"./download-rMb-Wdwu.js";import{F as E,a as z}from"./folder-open-D14BIeDx.js";import{H as Q}from"./hard-drive-B487moNe.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=k("ArrowRightIcon",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=k("CircleAlertIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=k("CircleCheckBigIcon",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=k("ClockIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=k("LayersIcon",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=k("LoaderCircleIcon",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),se={class:"p-6"},oe={class:"mb-6"},ae={class:"flex items-center gap-3"},le={class:"rounded-lg bg-green-600/20 p-2"},re={key:0,class:"mb-6 rounded-lg bg-dark-700/50 p-4"},ie={class:"mt-2 flex gap-3"},de={class:"font-mono text-primary-400"},ne={class:"font-mono text-primary-400"},ce={class:"space-y-4"},ue={class:"flex gap-3"},pe=["disabled"],me=["disabled"],xe={key:0,class:"rounded-lg bg-dark-700/50 p-4"},ve={class:"flex items-center justify-between text-sm"},he={class:"text-dark-300"},ge={class:"text-dark-400"},fe={class:"mt-2 h-2 overflow-hidden rounded-full bg-dark-600"},ke={key:1,class:"flex items-start gap-2 rounded-lg bg-red-900/20 p-3 text-red-400"},ye={class:"text-sm"},be={class:"flex items-center gap-2 text-sm text-dark-400"},_e=V({__name:"CdnImportDialog",emits:["close"],setup(R,{emit:y}){const d=y,$=j(),n=P("bundle-index"),x=P("dat-schemas"),i=h(localStorage.getItem("POE_PATCH_VER")||""),c=h(null),u=h(!1),v=h("");C(()=>n.loader.progress.value!=null);const p=C(()=>n.loader.progress.value);B(async()=>{try{const s=await fetch("https://poe-versions.obsoleet.org");c.value=await s.json()}catch{console.warn("Could not fetch latest patch versions")}x.isLoaded||x.fetchSchema()});async function _(){if(!i.value.trim()){v.value="Please enter a patch version";return}v.value="",u.value=!0;try{await n.loader.setPatch(i.value),await n.loadIndex(),localStorage.setItem("POE_PATCH_VER",i.value),d("close"),$.push("/viewer")}catch(s){v.value=s.message}finally{u.value=!1}}function m(s){i.value=s}return(s,t)=>(o(),r("div",se,[e("div",oe,[e("div",ae,[e("div",le,[g(l(M),{class:"h-6 w-6 text-green-400"})]),t[3]||(t[3]=e("div",null,[e("h2",{class:"text-xl font-semibold text-dark-100"},"Import from Patch CDN"),e("p",{class:"text-sm text-dark-400"},"Download files directly from PoE patch servers")],-1))])]),c.value?(o(),r("div",re,[t[6]||(t[6]=e("p",{class:"text-sm text-dark-300"},[e("span",{class:"text-dark-400"},"Latest versions:")],-1)),e("div",ie,[e("button",{class:"rounded-lg bg-dark-600 px-3 py-1.5 text-sm text-dark-200 hover:bg-dark-500",onClick:t[0]||(t[0]=b=>m(c.value.poe))},[t[4]||(t[4]=w(" PoE 1: ",-1)),e("code",de,a(c.value.poe),1)]),e("button",{class:"rounded-lg bg-dark-600 px-3 py-1.5 text-sm text-dark-200 hover:bg-dark-500",onClick:t[1]||(t[1]=b=>m(c.value.poe2))},[t[5]||(t[5]=w(" PoE 2: ",-1)),e("code",ne,a(c.value.poe2),1)])])])):D("",!0),e("div",ce,[e("div",null,[t[7]||(t[7]=e("label",{class:"mb-2 block text-sm font-medium text-dark-200"},"Patch Version",-1)),e("div",ue,[q(e("input",{"onUpdate:modelValue":t[2]||(t[2]=b=>i.value=b),type:"text",placeholder:"e.g., 3.25.0.0.0",class:"input flex-1 font-mono",disabled:u.value,onKeyup:O(_,["enter"])},null,40,pe),[[H,i.value]]),e("button",{class:"btn-primary whitespace-nowrap",disabled:u.value||!i.value.trim(),onClick:_},[u.value?(o(),f(l(T),{key:0,class:"h-4 w-4 animate-spin"})):(o(),f(l(J),{key:1,class:"h-4 w-4"})),e("span",null,a(u.value?"Importing...":"Import"),1)],8,me)])]),p.value?(o(),r("div",xe,[e("div",ve,[e("span",he,a(p.value.bundleName),1),e("span",ge,a(Math.round(p.value.received/p.value.totalSize*100))+"% ",1)]),e("div",fe,[e("div",{class:"h-full bg-primary-500 transition-all",style:G({width:`${p.value.received/p.value.totalSize*100}%`})},null,4)])])):D("",!0),v.value?(o(),r("div",ke,[g(l(Y),{class:"h-5 w-5 shrink-0"}),e("span",ye,a(v.value),1)])):D("",!0),e("div",be,[l(x).isLoading?(o(),f(l(T),{key:0,class:"h-4 w-4 animate-spin"})):(o(),f(l(Z),{key:1,class:"h-4 w-4 text-green-400"})),e("span",null,[w(a(l(x).isLoading?"Downloading schema...":"Schema loaded from")+" ",1),t[8]||(t[8]=e("a",{href:"https://github.com/poe-tool-dev/dat-schema",target:"_blank",class:"text-primary-400 hover:underline"}," poe-tool-dev/dat-schema ",-1))])])]),t[9]||(t[9]=e("div",{class:"mt-6 rounded-lg border border-dark-700 bg-dark-800/50 p-4"},[e("p",{class:"text-sm text-dark-400"}," This is useful when a new league is released. While the update is still downloading, you can review files and fix schema directly from the update servers. ")],-1))]))}}),we={class:"space-y-6"},Ce={class:"card"},$e={class:"flex items-center justify-between p-6"},De={class:"flex gap-3"},Ie={class:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4"},Le={class:"flex items-center gap-4"},Fe={class:"text-sm text-dark-400"},Ee={class:"text-2xl font-semibold text-dark-100"},Pe={class:"card"},Ae={class:"grid grid-cols-1 gap-4 p-6 sm:grid-cols-3"},Se=["onClick"],ze={class:"flex-1"},Te={class:"font-medium text-dark-100 group-hover:text-primary-400"},Ve={class:"mt-1 text-sm text-dark-500"},je={class:"grid grid-cols-1 gap-6 lg:grid-cols-2"},Me={class:"card"},Re={class:"p-6"},Ne={key:0,class:"flex flex-col items-center justify-center py-8 text-center"},Be={key:1,class:"space-y-3"},qe={class:"flex items-center gap-3"},He={class:"text-sm font-medium text-dark-200"},Oe={class:"text-xs text-dark-500"},Ge={class:"text-xs text-dark-500"},Ye=V({__name:"DashboardView",setup(R){const y=j(),d=P("bundle-index"),$=K(),n=C(()=>{if(!d.isLoaded)return null;const m=d.getRootDirs();let s=0,t=0;for(const b of m){const A=d.getDirContent(b);s+=A.files.length,t+=A.files.filter(N=>N.endsWith(".datc64")).length}return{totalTables:t,totalFiles:s,rootFolders:m.length}}),x=h([]),i=h(null);function c(){i.value?.click()}function u(m){const s=m.target;s.files?.length&&(y.push("/viewer"),setTimeout(()=>{window.dispatchEvent(new CustomEvent("open-local-files",{detail:s.files}))},100))}function v(){$.openModal({component:_e})}const p=[{title:"Open Local File",description:"Import .datc64 file from your computer",icon:z,color:"bg-blue-600/20 text-blue-400",action:c},{title:"Import from CDN",description:"Download files from PoE patch servers",icon:M,color:"bg-green-600/20 text-green-400",action:v},{title:"Browse All Tables",description:"Explore the complete data structure",icon:U,color:"bg-purple-600/20 text-purple-400",action:()=>y.push("/viewer")}],_=C(()=>[{title:"Data Tables",value:n.value?.totalTables??"-",icon:E,color:"text-primary-400",bgColor:"bg-primary-600/10"},{title:"Total Files",value:n.value?.totalFiles??"-",icon:te,color:"text-emerald-400",bgColor:"bg-emerald-600/10"},{title:"Root Folders",value:n.value?.rootFolders??"-",icon:z,color:"text-amber-400",bgColor:"bg-amber-600/10"},{title:"Index Status",value:d.isLoaded?"Loaded":"Loading...",icon:Q,color:d.isLoaded?"text-emerald-400":"text-amber-400",bgColor:d.isLoaded?"bg-emerald-600/10":"bg-amber-600/10"}]);return(m,s)=>(o(),r("div",we,[e("input",{ref_key:"fileInputRef",ref:i,type:"file",accept:".datc64,.dat,.dat64",multiple:"",class:"hidden",onChange:u},null,544),e("div",Ce,[e("div",$e,[s[2]||(s[2]=e("div",null,[e("h1",{class:"text-2xl font-semibold text-dark-100"},"Welcome to PoE DAT Studio"),e("p",{class:"mt-1 text-dark-400"},"Explore and analyze Path of Exile data files with ease")],-1)),e("div",De,[e("button",{class:"btn-primary",onClick:s[0]||(s[0]=t=>l(y).push("/viewer"))},[g(l(E),{class:"h-4 w-4"}),s[1]||(s[1]=w(" Open Viewer ",-1))])])])]),e("div",Ie,[(o(!0),r(I,null,L(_.value,t=>(o(),r("div",{key:t.title,class:"card p-6"},[e("div",Le,[e("div",{class:F(["rounded-xl p-3",t.bgColor])},[(o(),f(S(t.icon),{class:F(["h-6 w-6",t.color])},null,8,["class"]))],2),e("div",null,[e("p",Fe,a(t.title),1),e("p",Ee,a(t.value),1)])])]))),128))]),e("div",Pe,[s[3]||(s[3]=e("div",{class:"card-header"},[e("h2",{class:"text-lg font-medium text-dark-100"},"Quick Actions")],-1)),e("div",Ae,[(o(),r(I,null,L(p,t=>e("button",{key:t.title,class:"group flex items-start gap-4 rounded-xl border border-dark-700 bg-dark-800/50 p-4 text-left transition-all hover:border-dark-600 hover:bg-dark-700/50",onClick:t.action},[e("div",{class:F(["rounded-lg p-2.5",t.color])},[(o(),f(S(t.icon),{class:"h-5 w-5"}))],2),e("div",ze,[e("h3",Te,a(t.title),1),e("p",Ve,a(t.description),1)]),g(l(X),{class:"h-5 w-5 text-dark-600 transition-transform group-hover:translate-x-1 group-hover:text-dark-400"})],8,Se)),64))])]),e("div",je,[e("div",Me,[s[6]||(s[6]=e("div",{class:"card-header"},[e("h2",{class:"text-lg font-medium text-dark-100"},"Recent Files"),e("button",{class:"text-sm text-primary-400 hover:underline"},"View All")],-1)),e("div",Re,[x.value.length?(o(),r("ul",Be,[(o(!0),r(I,null,L(x.value,t=>(o(),r("li",{key:t.path,class:"flex items-center justify-between rounded-lg p-3 hover:bg-dark-700/50"},[e("div",qe,[g(l(E),{class:"h-5 w-5 text-dark-500"}),e("div",null,[e("p",He,a(t.name),1),e("p",Oe,a(t.path),1)])]),e("span",Ge,a(t.date),1)]))),128))])):(o(),r("div",Ne,[g(l(ee),{class:"h-12 w-12 text-dark-600"}),s[4]||(s[4]=e("p",{class:"mt-4 text-dark-400"},"No recent files",-1)),s[5]||(s[5]=e("p",{class:"text-sm text-dark-500"},"Files you open will appear here",-1))]))])]),s[7]||(s[7]=W('<div class="card"><div class="card-header"><h2 class="text-lg font-medium text-dark-100">Getting Started</h2></div><div class="p-6"><ul class="space-y-4"><li class="flex gap-4"><div class="flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-primary-600/20 text-sm font-medium text-primary-400"> 1 </div><div><h3 class="font-medium text-dark-200">Import Data Files</h3><p class="text-sm text-dark-500"> Load .datc64 files from your computer or import directly from PoE patch servers </p></div></li><li class="flex gap-4"><div class="flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-primary-600/20 text-sm font-medium text-primary-400"> 2 </div><div><h3 class="font-medium text-dark-200">Browse &amp; Analyze</h3><p class="text-sm text-dark-500"> Use the file explorer to navigate through the data structure and open tables </p></div></li><li class="flex gap-4"><div class="flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-primary-600/20 text-sm font-medium text-primary-400"> 3 </div><div><h3 class="font-medium text-dark-200">Export Data</h3><p class="text-sm text-dark-500"> Export analyzed data in various formats for further processing </p></div></li></ul></div></div>',1))])]))}});export{Ye as default};
