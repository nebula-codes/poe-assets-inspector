import{d as V,x as j,i as P,r as v,c as C,A as B,h as l,o as a,j as e,k as D,e as h,u as r,G as w,t as o,p as q,v as O,K as G,a as g,z as H,F as I,l as L,E as K,n as E,y as S}from"./index-Ce7e3ufs.js";import{G as M,u as W,D as U}from"./modal-DHBNwPI8.js";import{c as f}from"./createLucideIcon-k8n69aXm.js";import{D as Q}from"./download-qx9fD6YY.js";import{F,a as z}from"./folder-open-m_67ravl.js";import{H as J}from"./hard-drive-Y_D98ox2.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=f("ArrowRightIcon",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=f("CircleAlertIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=f("CircleCheckBigIcon",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=f("ClockIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=f("LayersIcon",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=f("LoaderCircleIcon",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),se={class:"p-6"},ae={class:"mb-6"},oe={class:"flex items-center gap-3"},re={class:"rounded-lg bg-green-600/20 p-2"},le={key:0,class:"mb-6 rounded-lg bg-dark-700/50 p-4"},de={class:"mt-2 flex gap-3"},ie={class:"font-mono text-primary-400"},ne={class:"font-mono text-primary-400"},ce={class:"space-y-4"},pe={class:"flex gap-3"},ue=["disabled"],me=["disabled"],xe={key:0,class:"rounded-lg bg-dark-700/50 p-4"},ke={class:"flex items-center justify-between text-sm"},ve={class:"text-dark-300"},he={class:"text-dark-400"},ge={class:"mt-2 h-2 overflow-hidden rounded-full bg-dark-600"},fe={key:1,class:"flex items-start gap-2 rounded-lg bg-red-900/20 p-3 text-red-400"},ye={class:"text-sm"},be={class:"flex items-center gap-2 text-sm text-dark-400"},_e=V({__name:"CdnImportDialog",emits:["close"],setup(R,{emit:y}){const i=y,$=j(),n=P("bundle-index"),x=P("dat-schemas"),d=v(localStorage.getItem("POE_PATCH_VER")||""),c=v(null),p=v(!1),k=v("");C(()=>n.loader.progress.value!=null);const u=C(()=>n.loader.progress.value);B(async()=>{try{const s=await fetch("https://poe-versions.obsoleet.org");c.value=await s.json()}catch{console.warn("Could not fetch latest patch versions")}x.isLoaded||x.fetchSchema()});async function _(){if(!d.value.trim()){k.value="Please enter a patch version";return}k.value="",p.value=!0;try{await n.loader.setPatch(d.value),await n.loadIndex(),localStorage.setItem("POE_PATCH_VER",d.value),i("close"),$.push("/viewer")}catch(s){k.value=s.message}finally{p.value=!1}}function m(s){d.value=s}return(s,t)=>(a(),l("div",se,[e("div",ae,[e("div",oe,[e("div",re,[h(r(M),{class:"h-6 w-6 text-green-400"})]),t[3]||(t[3]=e("div",null,[e("h2",{class:"text-xl font-semibold text-dark-100"},"Import from Patch CDN"),e("p",{class:"text-sm text-dark-400"},"Download files directly from PoE patch servers")],-1))])]),c.value?(a(),l("div",le,[t[6]||(t[6]=e("p",{class:"text-sm text-dark-300"},[e("span",{class:"text-dark-400"},"Latest versions:")],-1)),e("div",de,[e("button",{class:"rounded-lg bg-dark-600 px-3 py-1.5 text-sm text-dark-200 hover:bg-dark-500",onClick:t[0]||(t[0]=b=>m(c.value.poe))},[t[4]||(t[4]=w(" PoE 1: ",-1)),e("code",ie,o(c.value.poe),1)]),e("button",{class:"rounded-lg bg-dark-600 px-3 py-1.5 text-sm text-dark-200 hover:bg-dark-500",onClick:t[1]||(t[1]=b=>m(c.value.poe2))},[t[5]||(t[5]=w(" PoE 2: ",-1)),e("code",ne,o(c.value.poe2),1)])])])):D("",!0),e("div",ce,[e("div",null,[t[7]||(t[7]=e("label",{class:"mb-2 block text-sm font-medium text-dark-200"},"Patch Version",-1)),e("div",pe,[q(e("input",{"onUpdate:modelValue":t[2]||(t[2]=b=>d.value=b),type:"text",placeholder:"e.g., 3.25.0.0.0",class:"input flex-1 font-mono",disabled:p.value,onKeyup:G(_,["enter"])},null,40,ue),[[O,d.value]]),e("button",{class:"btn-primary whitespace-nowrap",disabled:p.value||!d.value.trim(),onClick:_},[p.value?(a(),g(r(T),{key:0,class:"h-4 w-4 animate-spin"})):(a(),g(r(Q),{key:1,class:"h-4 w-4"})),e("span",null,o(p.value?"Importing...":"Import"),1)],8,me)])]),u.value?(a(),l("div",xe,[e("div",ke,[e("span",ve,o(u.value.bundleName),1),e("span",he,o(Math.round(u.value.received/u.value.totalSize*100))+"% ",1)]),e("div",ge,[e("div",{class:"h-full bg-primary-500 transition-all",style:H({width:`${u.value.received/u.value.totalSize*100}%`})},null,4)])])):D("",!0),k.value?(a(),l("div",fe,[h(r(Y),{class:"h-5 w-5 shrink-0"}),e("span",ye,o(k.value),1)])):D("",!0),e("div",be,[r(x).isLoading?(a(),g(r(T),{key:0,class:"h-4 w-4 animate-spin"})):(a(),g(r(Z),{key:1,class:"h-4 w-4 text-green-400"})),e("span",null,[w(o(r(x).isLoading?"Downloading schema...":"Schema loaded from")+" ",1),t[8]||(t[8]=e("a",{href:"https://github.com/poe-tool-dev/dat-schema",target:"_blank",class:"text-primary-400 hover:underline"}," poe-tool-dev/dat-schema ",-1))])])]),t[9]||(t[9]=e("div",{class:"mt-6 rounded-lg border border-dark-700 bg-dark-800/50 p-4"},[e("p",{class:"text-sm text-dark-400"}," This is useful when a new league is released. While the update is still downloading, you can review files and fix schema directly from the update servers. ")],-1))]))}}),we={class:"space-y-6"},Ce={class:"card"},$e={class:"flex items-center justify-between p-6"},De={class:"flex gap-3"},Ie={class:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4"},Le={class:"flex items-center gap-4"},Ee={class:"text-sm text-dark-600 dark:text-dark-400"},Fe={class:"text-2xl font-semibold text-dark-900 dark:text-dark-100"},Pe={class:"card"},Ae={class:"grid grid-cols-1 gap-4 p-6 sm:grid-cols-3"},Se=["onClick"],ze={class:"flex-1"},Te={class:"font-medium text-dark-900 group-hover:text-primary-600 dark:text-dark-100 dark:group-hover:text-primary-400"},Ve={class:"mt-1 text-sm text-dark-600 dark:text-dark-500"},je={class:"grid grid-cols-1 gap-6 lg:grid-cols-2"},Me={class:"card"},Re={class:"p-6"},Ne={key:0,class:"flex flex-col items-center justify-center py-8 text-center"},Be={key:1,class:"space-y-3"},qe={class:"flex items-center gap-3"},Oe={class:"text-sm font-medium text-dark-800 dark:text-dark-200"},Ge={class:"text-xs text-dark-500"},He={class:"text-xs text-dark-500"},Ye=V({__name:"DashboardView",setup(R){const y=j(),i=P("bundle-index"),$=W(),n=C(()=>{if(!i.isLoaded)return null;const m=i.getRootDirs();let s=0,t=0;for(const b of m){const A=i.getDirContent(b);s+=A.files.length,t+=A.files.filter(N=>N.endsWith(".datc64")).length}return{totalTables:t,totalFiles:s,rootFolders:m.length}}),x=v([]),d=v(null);function c(){d.value?.click()}function p(m){const s=m.target;s.files?.length&&(y.push("/viewer"),setTimeout(()=>{window.dispatchEvent(new CustomEvent("open-local-files",{detail:s.files}))},100))}function k(){$.openModal({component:_e})}const u=[{title:"Open Local File",description:"Import .datc64 file from your computer",icon:z,color:"bg-blue-600/20 text-blue-400",action:c},{title:"Import from CDN",description:"Download files from PoE patch servers",icon:M,color:"bg-green-600/20 text-green-400",action:k},{title:"Browse All Tables",description:"Explore the complete data structure",icon:U,color:"bg-purple-600/20 text-purple-400",action:()=>y.push("/viewer")}],_=C(()=>[{title:"Data Tables",value:n.value?.totalTables??"-",icon:F,color:"text-primary-400",bgColor:"bg-primary-600/10"},{title:"Total Files",value:n.value?.totalFiles??"-",icon:te,color:"text-emerald-400",bgColor:"bg-emerald-600/10"},{title:"Root Folders",value:n.value?.rootFolders??"-",icon:z,color:"text-amber-400",bgColor:"bg-amber-600/10"},{title:"Index Status",value:i.isLoaded?"Loaded":"Loading...",icon:J,color:i.isLoaded?"text-emerald-400":"text-amber-400",bgColor:i.isLoaded?"bg-emerald-600/10":"bg-amber-600/10"}]);return(m,s)=>(a(),l("div",we,[e("input",{ref_key:"fileInputRef",ref:d,type:"file",accept:".datc64,.dat,.dat64",multiple:"",class:"hidden",onChange:p},null,544),e("div",Ce,[e("div",$e,[s[2]||(s[2]=e("div",null,[e("h1",{class:"text-2xl font-semibold text-dark-900 dark:text-dark-100"}," Welcome to PoE DAT Studio "),e("p",{class:"mt-1 text-dark-600 dark:text-dark-400"}," Explore and analyze Path of Exile data files with ease ")],-1)),e("div",De,[e("button",{class:"btn-primary",onClick:s[0]||(s[0]=t=>r(y).push("/viewer"))},[h(r(F),{class:"h-4 w-4"}),s[1]||(s[1]=w(" Open Viewer ",-1))])])])]),e("div",Ie,[(a(!0),l(I,null,L(_.value,t=>(a(),l("div",{key:t.title,class:"card p-6"},[e("div",Le,[e("div",{class:E(["rounded-xl p-3",t.bgColor])},[(a(),g(S(t.icon),{class:E(["h-6 w-6",t.color])},null,8,["class"]))],2),e("div",null,[e("p",Ee,o(t.title),1),e("p",Fe,o(t.value),1)])])]))),128))]),e("div",Pe,[s[3]||(s[3]=e("div",{class:"card-header"},[e("h2",{class:"text-lg font-medium text-dark-900 dark:text-dark-100"},"Quick Actions")],-1)),e("div",Ae,[(a(),l(I,null,L(u,t=>e("button",{key:t.title,class:"group flex items-start gap-4 rounded-xl border border-dark-300 bg-dark-100/50 p-4 text-left transition-all hover:border-dark-400 hover:bg-dark-200/50 dark:border-dark-700 dark:bg-dark-800/50 dark:hover:border-dark-600 dark:hover:bg-dark-700/50",onClick:t.action},[e("div",{class:E(["rounded-lg p-2.5",t.color])},[(a(),g(S(t.icon),{class:"h-5 w-5"}))],2),e("div",ze,[e("h3",Te,o(t.title),1),e("p",Ve,o(t.description),1)]),h(r(X),{class:"h-5 w-5 text-dark-400 transition-transform group-hover:translate-x-1 group-hover:text-dark-600 dark:text-dark-600 dark:group-hover:text-dark-400"})],8,Se)),64))])]),e("div",je,[e("div",Me,[s[6]||(s[6]=e("div",{class:"card-header"},[e("h2",{class:"text-lg font-medium text-dark-900 dark:text-dark-100"},"Recent Files"),e("button",{class:"text-sm text-primary-600 hover:underline dark:text-primary-400"}," View All ")],-1)),e("div",Re,[x.value.length?(a(),l("ul",Be,[(a(!0),l(I,null,L(x.value,t=>(a(),l("li",{key:t.path,class:"flex items-center justify-between rounded-lg p-3 hover:bg-dark-200/50 dark:hover:bg-dark-700/50"},[e("div",qe,[h(r(F),{class:"h-5 w-5 text-dark-500"}),e("div",null,[e("p",Oe,o(t.name),1),e("p",Ge,o(t.path),1)])]),e("span",He,o(t.date),1)]))),128))])):(a(),l("div",Ne,[h(r(ee),{class:"h-12 w-12 text-dark-400 dark:text-dark-600"}),s[4]||(s[4]=e("p",{class:"mt-4 text-dark-600 dark:text-dark-400"},"No recent files",-1)),s[5]||(s[5]=e("p",{class:"text-sm text-dark-500"},"Files you open will appear here",-1))]))])]),s[7]||(s[7]=K('<div class="card"><div class="card-header"><h2 class="text-lg font-medium text-dark-900 dark:text-dark-100">Getting Started</h2></div><div class="p-6"><ul class="space-y-4"><li class="flex gap-4"><div class="flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-primary-600/20 text-sm font-medium text-primary-600 dark:text-primary-400"> 1 </div><div><h3 class="font-medium text-dark-800 dark:text-dark-200">Import Data Files</h3><p class="text-sm text-dark-500"> Load .datc64 files from your computer or import directly from PoE patch servers </p></div></li><li class="flex gap-4"><div class="flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-primary-600/20 text-sm font-medium text-primary-600 dark:text-primary-400"> 2 </div><div><h3 class="font-medium text-dark-800 dark:text-dark-200">Browse &amp; Analyze</h3><p class="text-sm text-dark-500"> Use the file explorer to navigate through the data structure and open tables </p></div></li><li class="flex gap-4"><div class="flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-primary-600/20 text-sm font-medium text-primary-600 dark:text-primary-400"> 3 </div><div><h3 class="font-medium text-dark-800 dark:text-dark-200">Export Data</h3><p class="text-sm text-dark-500"> Export analyzed data in various formats for further processing </p></div></li></ul></div></div>',1))])]))}});export{Ye as default};
