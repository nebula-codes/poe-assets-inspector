import{L as v,r as p,C as w,c as y}from"./index-Dy2UfTkS.js";const a={theme:"dark",fontSize:14,showLineNumbers:!0,wordWrap:!1,autoAnalyze:!0,cacheEnabled:!0,maxRecentFiles:10,highlightSelectedRow:!0,copyFormat:"json"},s="poe-dat-studio-settings";function z(){try{const e=localStorage.getItem(s);if(e)return{...a,...JSON.parse(e)}}catch{console.warn("Failed to load settings from localStorage")}return{...a}}function E(e){try{localStorage.setItem(s,JSON.stringify(e))}catch{console.warn("Failed to save settings to localStorage")}}const b=v("settings",()=>{const e=p(z());w(e,t=>E(t),{deep:!0});function r(t){e.value.theme=t,o(t)}function o(t){const n=document.documentElement;if(t==="system"){const S=window.matchMedia("(prefers-color-scheme: dark)").matches;n.classList.toggle("dark",S)}else n.classList.toggle("dark",t==="dark")}function l(t){e.value.fontSize=Math.max(10,Math.min(20,t))}function i(){e.value.showLineNumbers=!e.value.showLineNumbers}function c(){e.value.wordWrap=!e.value.wordWrap}function u(){e.value.autoAnalyze=!e.value.autoAnalyze}function g(){e.value.cacheEnabled=!e.value.cacheEnabled}function d(){e.value={...a}}function h(){e.value.highlightSelectedRow=!e.value.highlightSelectedRow}function m(t){e.value.copyFormat=t}const f=y(()=>({"--viewer-font-size":`${e.value.fontSize}px`,"--viewer-line-height":`${Math.round(e.value.fontSize*1.35)}px`}));return o(e.value.theme),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",()=>{e.value.theme==="system"&&o("system")}),{settings:e,cssVariables:f,setTheme:r,setFontSize:l,toggleLineNumbers:i,toggleWordWrap:c,toggleAutoAnalyze:u,toggleCache:g,toggleHighlightSelectedRow:h,setCopyFormat:m,resetSettings:d}});export{b as u};
